<!DOCTYPE html>
<html lang="en" cellpadding="0" cellspacing="0">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ideoxan</title>

        <link rel="stylesheet" type="text/css" href="/static/styles.css">
        <link rel="icon" type="image/png" href="/static/ix_color_pb.png">
        <link rel="stylesheet" type="text/css" href="https://cdn.materialdesignicons.com/5.1.45/css/materialdesignicons.min.css">
        <link rel="stylesheet" href="/static/lib/prism-monokai.css">

        <script data-main="/static/js/index" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js"></script>
        <script>
            require.config({
                paths: {
                    'ace': 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/',
                    'jquery': 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min',
                    'prism': 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/prism.min',
                }
            })
            
            // Recreating vars clientside
            let meta = "<%= ServerAppData.ideoxan.lessonData.meta %>"
            "<% delete ServerAppData.ideoxan.lessonData.meta %>"
            let CAppData = JSON.parse("<%= JSON.stringify(ServerAppData) %>".replace(/(&#34;)+/g, `"`))
            CAppData.ideoxan.lessonData.meta = JSON.parse(decodeURIComponent(meta).replace(/(&#34;)+/g, `"`))
            delete meta
            
        </script>
    </head>
    <body id="editor-body">
        <!-- Top Color Bar -->
        <table id="top-cbar">
            <tr>
                <td id="top-cbar-t1">
                    <img id="top-cbar-ix" class="ico-16px" src="/static/ix_primary_transparent_w.png">
                </td>
                <td id="top-cbar-t2">
                    <span id="connected-icon" class="mdi mdi-help ico-12px"></span> 
                    <span id="connected-status" class="subheading">Connecting...</span>
                </td>
                <td id="top-cbar-t3">
                    <span id="top-cbar-title"></span>
                </td>
                <td id="top-cbar-t4">
                    <!--Intentionally left blank-->
                </td>
            </tr>
        </table>
        <table id="editor-container">
            <tr>
                <!-- Left side -->
                <td class="left">
                    <!-- Top Code Editor -->
                    <div id="code-editor">
                        <table class="editor-tabs">
                            <tr id="code-editor-tabs-container">
                                <!-- <td class="editor-tabs-t editor-tabs-t-inactive" id='editor-tabs-t-0'>
                                    <a href="#" class="box-link">
                                        <span class="mdi mdi-language-html5 ico-12px ico-html"></span> <span class="editor-tabs-filename">index.html</span>
                                    </a>
                                </td> -->
                            </tr>
                        </table>

                        <div id="code-editor-container"></div>
                    </div>
                    <!-- Terminal?? -->

                    
                </td>
                <!-- Right Side -->
                <td class="right">
                    <!-- Top Viewport/Console -->
                    <div id="right-top">
                        <table class="editor-tabs">
                            <tr id="right-tabs-container">
                                <!-- <td class="editor-tabs-t editor-tabs-t-active" id='editor-tabs-t-r-0'>
                                    <a href="#" class="box-link">
                                        <span class="mdi mdi-monitor ico-12px ico-white"></span> <span class="editor-tabs-filename">Viewport</span>
                                    </a>
                                </td> -->
                            </tr>
                        </table>
                        <div id="viewport">
                            <iframe id="viewport-iframe-content" srcdoc="<span style='font-size:20px;color:#ff0000'>you shouldn't be able to read this...</span>"> </iframe>
                        </div>
                        <div id="terminal">
                            <div id="terminal-container">
                                <!-- <p class="terminal-out"><span class="terminal-out-time">time</span> [CONSOLE] This is a sample output (index.js:1:1)</p> -->
                            </div>
                        </div>
                    </div>
                    <!-- Bottom Lesson Guide -->
                    <div id="lesson-guide">
                        <div id="lesson-guide-div">
                            Lesson Guide
                        </div>
                        <div id="lesson-guide-container">
                            <div id="lesson-guide-content">
                                <h1 id="lesson-guide-title">Lesson Title</h1>
                                <h2 id="lesson-guide-number">Lesson Number</h2>
                                <%- include("../../cur/curriculum-" + ServerAppData.ideoxan.lessonData.course + "/content/" + ServerAppData.ideoxan.lessonData.lesson + "/" + ServerAppData.ideoxan.lessonData.lesson + ".html")%>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td class="leftbottom">
                    <div id="statusbar">
                        <div class="statusbar-info" id="statusbar-pos">Line 1, Col 1</div>
                        <div class="statusbar-info" id="statusbar-tabsize">Tab Size: 4 Spaces</div>
                        <div class="statusbar-info" id="statusbar-lang">javascript</div>
                    </div>
                </td>
                <td class="rightbottom">
                    <table>
                        <tr>
                            <td id="button-lesson-back">
                                <a href="#" class="button-lesson-controls-link">
                                   <p class="subheading"><span class="mdi mdi-chevron-left ico-18px ico-dark"></span> Previous Lesson</p>
                                </a>
                            </td>
                            <td id="button-lesson-next">
                                <a href="#" class="button-lesson-controls-link">
                                    <p class="subheading">Next Lesson <span class="mdi mdi-chevron-right ico-18px ico-white"></span></p>
                                </a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>


        <!-- Scripts -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.js" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/theme-twilight.js" type="text/javascript" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-javascript.js" type="text/javascript" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-css.js" type="text/javascript" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-html.js" type="text/javascript" charset="utf-8"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>

        <script type="text/javascript" src="/static/js/index.js"></script>
        <script type="text/javascript" src="/static/js/utils.js"></script>
        
    </body> 
</html>