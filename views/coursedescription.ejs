<!DOCTYPE html>
<html>
    <head>
        <%- include('./partials/head.ejs', {title: meta.name}) %>
        <link rel="stylesheet" type="text/css" href="/static/css/site.css">
    </head>
    <body>
        <%- include('./partials/nav.ejs') %>

        <main id="container" class="course-container">
            <div class="cd-type-0 course-wrapper">
                <div class="course-actions">
                    <img src="/static/img/htmlbanner.webp">
                    <div class="course-actions-content">
                        <h6 class="subheading">Actions</h6>
                        <a href="/editor/<%- meta.name.toLowerCase().replace(/ /g, '-').replace(/[\(\).]/g, '') %>/000/000" class="button button-primary">Preview <span class="mdi mdi-chevron-right ico-16px"></span></a>
                        <a href="/catalogue" class="button button-dark">View Catalogue <span class="mdi mdi-text-box ico-16px"></span></a>
                        <div class="hr"></div>

                        <h6 class="subheading">Info</h6>
                        <%let numLessons=0;meta.chapters.forEach(chapter=>{numLessons+=chapter.lessons.length})%>
                        <p><b>Number of Chapters:</b> <%- meta.chapters.length %></p>
                        <p><b>Number of Lessons:</b> <%- numLessons %></p>
                        <p><b>Status:</b> <% if(meta.tags.includes('coming_soon')){ %>Coming Soon<%}else if(meta.tags.includes('pro')){%><div class="boxgrid-top-price subheading"><span class="mdi mdi-star ico-8px"></span> PRO</div><%}else{%>Free (CC-BY-SA-4.0)<%} %></p>
                        <% if (!meta.tags.includes('coming_soon') || !meta.tags.includes('pro')) {%><p><b>Source Code:</b> <a href="https://www.github.com/ideoxan/curriculum-<%- meta.name.toLowerCase().replace(/ /g, '-').replace(/[\(\).]/g, '') %>">GitHub</a></p><% } %>
                    </div>
                </div>

                <div class="course-description">
                    <h1 class="heading"><%- meta.name %></h1>
                    <% if (meta.path.hasPath) { %>
                        <h4 class="subheading"><span class="mdi mdi-<%- meta.path.icon %> ico-12px"></span> <%- meta.path.name %></h4>
                    <% } else { %>
                        <h4 class="subheading"><span class="mdi ico-12px"></span> </h4>
                    <% } %>
                    <div class="tag-container">
                        <% meta.tags.forEach(tag => { %>
                            <div class="tag"><div class="tag-ico ico-<%- tag %>"><span class="mdi mdi-language-<%- tag %> ico-16px"></span></div><div class="tag-text"><%- tag %></div></div>
                        <% }) %>
                    </div>
                    <% if (meta.tags.includes('pro')) { %>
                        <div class="pro-banner">
                            <div><b><span class="mdi mdi-star ico-8px"></span> PRO: </b> This feature is only available to IX+ Plus Subscribers.</div>
                            <a href="/catalogue" class="button">Learn More <span class="mdi mdi-chevron-right ico-16px"></span></a>
                        </div>
                    <% } %>
                    <h6 class="subheading">Abstract</h6>
                    <div class="course-description-text"><%- meta.abstract %></div>
                    <h6 class="subheading">Full Description</h6>
                    <div class="course-description-text"><%- meta.long %></div>
                </div>
            </div>
        </main>

        <%- include('./partials/footer.ejs') %>

        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>

        <script src="/static/js/index.js" type="text/javascript"></script>
        <script src="/static/js/utils.js" type="text/javascript"></script>
    </body>
</html>